<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EssenceExtract</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"> <!-- Link to dashboard CSS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- jQuery for AJAX -->
</head>

<body>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="logo">EssenceExtract</div>
        <ul class="nav-links">
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Features</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <h1>EssenceExtract</h1>
        <p class="subtitle">Discover the Significance in Every Word</p>

        <!-- Input Area -->
        <form id="textForm">
            <textarea name="text_data" id="inputText" placeholder="Enter text here..." required></textarea>

            <!-- Buttons -->
            <div class="buttons">
                <button type="submit" class="btn primary">Summarize</button>
                <button type="button" onclick="clearText()" class="btn secondary">Clear Text</button>
                <button type="button" onclick="resetSummary()" class="btn tertiary">Reset Summary</button>
            </div>
        </form>

        <!-- Output Area -->
        <div id="output" class="output" style="display: none;">
            <h3>Generated Sentence Pairs:</h3>
            <ul id="pairList"></ul>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 EssenceExtract. All rights reserved.</p>
    </footer>

    <script>
        // Handle form submission via AJAX
        $("#textForm").submit(function (event) {
            event.preventDefault(); // Prevent page reload on form submit

            const inputText = $("#inputText").val(); // Get input text

            // Make AJAX request to the backend
            $.ajax({
                url: "/process", // Flask route that handles the text processing
                type: "POST",
                data: { text_data: inputText },
                success: function (response) {
                    // Clear the previous output
                    $("#pairList").empty();
                    $("#output").show(); // Show the output section

                    // Loop through the returned sentence pairs and display them
                    response.pairs.forEach(function (pair) {
                        $("#pairList").append(
                            `<li><strong>Sentence 1:</strong> ${pair[0]}<br><strong>Sentence 2:</strong> ${pair[1]}</li>`
                        );
                    });
                },
                error: function () {
                    alert("An error occurred while processing the text.");
                }
            });
        });

        // Clear the input text
        function clearText() {
            $("#inputText").val('');
        }

        // Reset the summary output
        function resetSummary() {
            $("#pairList").empty();
            $("#output").hide();
        }
    </script>

</body>

</html>
